(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[2641],{40178:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var s=i(8081),o=i.n(s),n=i(23645),a=i.n(n)()(o());a.push([e.id,"\n/* stylelint-disable */\n.app[data-v-021fe68e] { --top: auto; --bottom: auto; --right: auto; --left: auto; height: auto; min-height: auto; width: var(--width); position: absolute; top: var(--top); bottom: var(--bottom); right: var(--right); left: var(--left); display: flex; flex-direction: column; align-items: stretch; background-color: var(--color-bg); border-radius: var(--border-radius); transition: top 0.2s ease, right 0.2s ease;\n}\n.app.focused[data-v-021fe68e] { z-index: 4;\n}\n.nipple-top-left[data-v-021fe68e]:after, .nipple-bottom-left[data-v-021fe68e]:after { left: var(--nipple-displacement);\n}\n.nipple-top-right[data-v-021fe68e]:after, .nipple-bottom-right[data-v-021fe68e]:after { right: var(--nipple-displacement);\n}\n\t/* This needs to be in this component (or general stylesheet) or else the transition won't work when the component is async. I don't know why. */\n.slide-down-fade-enter-active[data-v-021fe68e], .slide-down-fade-leave-active[data-v-021fe68e] { transition: transform 0.2s ease, opacity, 0.2s ease, right 0s, top 0s;\n} /* right 0s, top 0s is to fix a case where the app transitions right when opening if it is flipping horizontal direction */\n.slide-down-fade-enter[data-v-021fe68e], .slide-down-fade-leave-to[data-v-021fe68e] { opacity: 0; transform: translateY(-3px);\n}\n@media screen and (max-width: 450px) {\n.app.slide-down-fade-enter-active[data-v-021fe68e], .app.slide-down-fade-leave-active[data-v-021fe68e] { transition: transform 0.2s ease, opacity, 0.2s ease, right 0s, top 0s;\n} /* right 0s, top 0s is to fix a case where the app transitions right when opening if it is flipping horizontal direction */\n.app.slide-down-fade-enter[data-v-021fe68e], .app.slide-down-fade-leave-to[data-v-021fe68e] { opacity: 0; transform: translateY(calc(var(--app-translate-amount) * -1));\n}\n}\n\n",""]);const p=a},19461:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var s=function(){var e=this;return(0,e._self._c)("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"app",staticClass:"app popup nipple",class:[{focused:e.focused},"display-"+e.positionArray[0],"display-"+e.positionArray[1],e.nippleClass],style:[{"--width":e.width+"px","--nipple-displacement":e.shiftedNippleDisplacement+"px"},e.positionCss],attrs:{"data-test":"app-popup"}},[e._t("default")],2)};s._withStripped=!0;var o=i(40063),n=i(65550);const a={name:"AppPopup",doNotWaitForMount:!0,directives:{clickOutside:o.Z},unreactive:()=>({halfNippleWidth:m.constants.nippleWidthPx/2}),props:{nippleDisplacement:{type:Number,default:m.constants.nippleDisplacementPx},width:{type:Number,default:300},viewManager:{type:Object,default:null},position:{type:String,required:!0},detailedPosition:{type:Object,default:null},region:{type:[String,Array],required:!0},focused:{type:Boolean,default:!1}},data:()=>({flipHorizontalPosition:!1,shiftByPx:0}),computed:{positionArray(){const e=this.position.split("-");return this.flipHorizontalPosition&&(e[1]=m.utils.getOppositePosition(e[1])),e},nippleClass(){return["nipple"].concat(this.positionArray.map(m.utils.getOppositePosition)).join("-")},positionCss(){const e=this.detailedPosition||{[m.utils.getOppositePosition(this.positionArray[0])]:"100%",[m.utils.getOppositePosition(this.positionArray[1])]:"50%"};return Object.entries(e).reduce(((e,[t,i])=>(["left","right"].includes(t)&&("number"==typeof i?i=i-(this.flipHorizontalPosition?this.width-2*this.nippleDisplacement:0)-this.shiftByPx:"string"==typeof i&&(i=`calc(${i} - ${this.nippleDisplacement-this.shiftByPx}px)`)),e["--"+t]="number"==typeof i?i+"px":i,e)),{})},shiftedNippleDisplacement(){return this.nippleDisplacement-this.halfNippleWidth-this.shiftByPx}},mounted(){this.flipHorizontalPosition=this.shouldFlipHorizontalPosition(),this.$nextTick((()=>this.shiftByPx=this.getShiftPx())),this.hideOverlappingWidgets()},created(){n.Z.registerEventListener("closeApp","keyup",27,this.close),window.addEventListener("resize",this.onWindowResize)},destroyed(){n.Z.removeEventListener("closeApp","keyup",27),window.removeEventListener("resize",this.onWindowResize),m.widgetManager.refocusOverlap(this.region)},methods:{onClickOutside(e){this.viewManager?this.viewManager.awaitCloseConfirmationIfNeeded().then((()=>this.$emit("clickOutside",e))):this.$emit("close")},onWindowResize(){this.disableSmoothReflow=!0,clearTimeout(this.debouceResize),this.debouceResize=setTimeout((()=>{this.disableSmoothReflow=!1}),500)},shouldFlipHorizontalPosition(){const e=this.$refs.app&&this.$refs.app.getBoundingClientRect();return!!e&&e.left<0},getShiftPx(){const e=this.$refs.app&&this.$refs.app.getBoundingClientRect();return e?"left"===this.positionArray[1]?Math.max(e.right-(window.innerWidth-m.constants.dashboardSidePaddingPx),0):Math.max(-1*(e.left-m.constants.dashboardSidePaddingPx),0):0},close(){this.$emit("close")},hideOverlappingWidgets(){var e,t;let i=(null===(e=this.$refs.view)||void 0===e?void 0:e.scrollHeight)||(null===(t=this.$refs.loading)||void 0===t?void 0:t.scrollHeight);i&&m.widgetManager.unfocusOverlap(this.region,i)}}};i(91513);const p=(0,i(51900).Z)(a,s,[],!1,null,"021fe68e",null).exports},91513:(e,t,i)=>{var s=i(40178);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,i(45346).Z)("24100e0e",s,!1,{ssrId:!0})}}]);